services:
  spacenotes:
    image: ghcr.io/mikaelwills/spacenotes:latest
    container_name: spacenotes
    ports:
      - "5050:3000"  # SpacetimeDB
      - "5051:80"    # Web Client
      - "5052:5052"  # MCP Server
    volumes:
      - /path/to/your/notes:/vault  # Edit this to your notes folder
      - spacetimedb-data:/var/lib/spacetimedb
    restart: unless-stopped

  opencode:
    image: ghcr.io/sst/opencode:latest
    container_name: opencode
    ports:
      - "5053:5053"
    volumes:
      - ./opencode.json:/root/.config/opencode/config.json:ro
    environment:
      - ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY:-}
      - OPENAI_API_KEY=${OPENAI_API_KEY:-}
    command: ["serve", "--port", "5053", "--hostname", "0.0.0.0"]
    restart: unless-stopped
    depends_on:
      - spacenotes

volumes:
  spacetimedb-data:
